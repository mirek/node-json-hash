{"version":3,"sources":["src/digest.js"],"names":[],"mappings":"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","file":"src/digest.js","sourcesContent":["\n// Compute digest for JSON object.\nexport function digest (a, { algorithm = 'sha1', inputEncoding = 'utf8', outputEncoding = 'hex', crypto } = {}) {\n  let h = crypto.createHash(algorithm)\n  let u = (...args) => h.update(args.join(':'), inputEncoding)\n  let d = a => digest(a, { algorithm, inputEncoding, outputEncoding, crypto })\n  switch (true) {\n\n    // undefined\n    case typeof(a) === 'undefined':\n      u('u')\n      break;\n\n    // null\n    case a === null:\n      u('n')\n      break\n\n    // boolean\n    case typeof a === 'boolean':\n    case a instanceof Boolean:\n      u('f', a.valueOf())\n      break\n\n    // number\n    case typeof a === 'number':\n    case a instanceof Number:\n      u('i', `${a}`)\n      break\n\n    // string\n    case typeof a === 'string':\n    case a instanceof String:\n      u('s', `${a}`)\n      break\n\n    // symbol\n    case typeof a === 'symbol':\n    case a instanceof Symbol:\n      u('S', `${a}`)\n      break\n\n    // date\n    case a instanceof Date:\n      u('d', a.toISOString())\n      break\n\n    // regexp\n    case a instanceof RegExp:\n      u('x', `${a}`)\n      break\n\n    // function\n    case a instanceof Function:\n      u('F', a.toString())\n      break\n\n    // array\n    case Array.isArray(a):\n      u('[')\n      a.forEach(e => u('a', d(e)))\n      u(']')\n      break\n\n    // object\n    default:\n      u('{')\n      Object.keys(a).sort().forEach((k) => u('k', d(k), 'v', d(a[k])))\n      u('}')\n      break\n  }\n  return h.digest(outputEncoding)\n}\n"]}