{"version":3,"sources":["src/crypto.js"],"names":[],"mappings":"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","file":"src/crypto.js","sourcesContent":["\n// var INPUT_ENCODINGS = [ 'binary', 'ascii', 'utf8' ]\n// var OUTPUT_ENCODINGS = [ 'binary', 'hex', 'base64' ]\n\nfunction N(r, a, enc) {\n  if (Array.isArray(a)) {\n    let n = a.length\n    for (let i = 0; i < n; i++) {\n      r.push(a[i])\n    }\n  } else {\n    if (enc === 'utf8') {\n      let b = unescape(encodeURIComponent(a))\n      let n = b.length\n      for (let i = 0; i < n; i++) {\n        r.push(b.charCodeAt(i))\n      }\n    } else {\n      let n = a.length\n      for (let i = 0; i < n; i++) {\n        let c = a.charCodeAt(i) & 0xff\n        r.push((c === 0 && enc === 'ascii') ? 0x20 : c)\n      }\n    }\n  }\n}\n\nvar O = function(a, c) {\n  let r = null\n  let s = function (e) { return String.fromCharCode(e) }\n  let h = function (e) { return e.toString(16) }\n  switch (c) {\n    case 'binary': r = a.map(s).join(''); break\n    case 'base64': r = atob(a.map(s).join('')); break\n    default: r = a.map(h).join(''); break\n  }\n  return r\n}\n\nvar R = function (n, s) {\n  return (n << s) | (n >>> (32 - s))\n}\n\nfunction SHA1(w) {\n\n  let n = w.length\n  let M = 0x0ffffffff\n  let W = new Array(80)\n  let H = [0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0]\n\n  for (var b = 0; b < w.length; b += 16) {\n    let A = H[0], B = H[1], C = H[2], D = H[3], E = H[4]\n\n    for (let i = 0; i < 16; i++) {\n      W[i] = w[b + i]\n    }\n\n    for (let i = 16; i <= 79; i++) {\n      W[i] = R(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1)\n    }\n\n    for (let i = 0; i <= 19; i++) {\n      let t = (R(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5A827999) & M\n      E = D; D = C; C = R(B, 30); B = A; A = t\n    }\n\n    for (let i = 20; i <= 39; i++) {\n      let t = (R(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & M\n      E = D; D = C; C = R(B, 30); B = A; A = t\n    }\n\n    for (let i = 40; i <= 59; i++) {\n      let t = (R(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8F1BBCDC) & M\n      E = D; D = C; C = R(B, 30); B = A; A = t\n    }\n\n    for (let i = 60; i <= 79; i++) {\n      let t = (R(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & M\n      E = D; D = C; C = R(B, 30); B = A; A = t\n    }\n\n    H[0] = (H[0] + A) & M\n    H[1] = (H[1] + B) & M\n    H[2] = (H[2] + C) & M\n    H[3] = (H[3] + D) & M\n    H[4] = (H[4] + E) & M\n  }\n\n  return H\n}\n\nfunction createHash(algorithm) {\n  let r = null\n  switch (algorithm) {\n\n    // We support SHA1 only for now.\n    case 'sha1':\n      r = createHashSHA1(algorithm)\n      break\n\n    default:\n      throw new Error('Digest method not supported.')\n  }\n  return r\n}\n\nfunction createHashSHA1() {\n  let m = 0\n  let c = []\n  let r = []\n  return {\n    update: function (a, e) {\n      N(c, a, e)\n    },\n    digest: function (outputEncoding) {\n\n      let n = c.length\n      for (let i = 0; i < n - 3; i += 4) {\n        r.push(\n          c[i] << 24 | c[i + 1] << 16 | c[i + 2] << 8 | c[i + 3]\n        )\n      }\n\n      switch (n % 4) {\n        case 0: r.push(0x080000000); break\n        case 1: r.push(c[n - 1] << 24 | 0x0800000); break\n        case 2: r.push(c[n - 2] << 24 | c[n - 1] << 16 | 0x08000); break\n        case 3: r.push(c[n - 3] << 24 | c[n - 2] << 16 | c[n - 1] << 8 | 0x80); break\n      }\n      while ((r.length % 16) != 14) {\n        r.push(0)\n      }\n      r.push(n >>> 29)\n      r.push((n << 3) & 0x0ffffffff)\n\n      // r.map(\n      //   function (a) {\n      //     var r = []\n      //     for (var i = 7; i >= 0; --i) {\n      //       r.push(((a >>> (i * 4)) & 0x0f).toString(16))\n      //     }\n      //     return r.join('')\n      //   }\n      // ).join('')\n\n      return O(\n        SHA1(r).reduce(\n          function (r, a) {\n            for (let i = 7; i >= 0; --i) {\n              r.push(a >>> (i * 4) & 0x0f)\n            }\n            return r\n          }\n        , [])\n      , outputEncoding)\n    }\n  }\n}\n\n// if (!module.parent) {\n//   var h = createHashSHA1()\n//   h.update('hello')\n//   console.log(h.digest('hex'))\n// }\n\nmodule.exports = {\n  createHash: createHash\n}\n"]}